const request = require("request");
let address = "0x00000";
let network = "mumbai";
let token = "maticToken";
let amount = 0;
function getOrdinalNum(n) {
    return n + (n > 0 ? ['th', 'st', 'nd', 'rd'][(n > 3 && n < 21) || n % 10 > 3 ? 0 : n % 10] : '');
  }
function run(){
    console.log("Getting Coins From Faucet" );
    request.post({url: "https://api.faucet.matic.network/transferTokens",body: { 'network': network, 'address': address, 'token': token}, json: true}, function (error,response,body){
        if (typeof body.hash === "undefined"){
            console.log("Failed.. Retrying in 10 seconds\nError:");
            console.log(body);
            setTimeout(() => {
                console.log("Retrying..");
                run();
            }, 10 * 1000);
            return;
        }
        amount+= 1;
        console.log("Gotten coins from faucet" + `\nThis is the ${getOrdinalNum(amount)} time that you've gotten ${token}\nReturned:`);
        console.log(body);
        setTimeout(() => {
            run();
        }, 60 * 1000);
    })
}
run();
